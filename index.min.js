module.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t){return"undefined"!=typeof t}function c(t,e){return p.create(t,e||{}).value}function a(t,e){return p.registerType(t,e)}function h(t,e){return o(t)&&t[l]?t[l].meta(e):void 0}var f=function m(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:m(r,e,n)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(n)},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0}),e.create=c,e.register=a,e.meta=h;var l=Symbol(),g=function(t){function e(t,r){n(this,e);var o=i(this,Object.getPrototypeOf(e).call(this,t));return o.path=r,o}return r(e,t),e}(Error),p=function(){function t(e,i){n(this,t),this.config=t.getConfig(e);try{this.setValue(i||this.config["default"])}catch(r){}}return s(t,[{key:"attach",value:function(t,e){this.detach(),o(t)&&o(e)&&(this.parent=t,this.key=e,Object.defineProperty(this.parent,this.key,{configurable:!this.config.required,enumerable:!0,get:this.getter(),set:this.setter()}))}},{key:"detach",value:function(){o(this.key)&&o(this.parent)&&delete this.parent[this.key],delete this.key,delete this.parent}},{key:"check",value:function(t){if(!o(t)&&this.config.required)throw new g("required",this.getPath());if(this.config.validator&&!this.config.validator(t))throw new g("validator",this.getPath())}},{key:"init",value:function(t){this.check(t)}},{key:"getter",value:function(){var t=this.getValue.bind(this);return t.config=this.config,t}},{key:"getValue",value:function(){return this.check(this.value),this.value}},{key:"setter",value:function(){var t=this.setValue.bind(this);return t.config=this.config,t}},{key:"setValue",value:function(t){return this.init(t),this.value=t}},{key:"getPath",value:function(){var t="";return this.parent&&this.key&&(this.parent[l]&&(t=this.parent[l].getPath()),t+=(t?".":"")+this.key),t}},{key:"meta",value:function(t){if(t){var e=Object.getOwnPropertyDescriptor(this.value,t);return((e||{}).get||{}).config}return this.config}}],[{key:"registerType",value:function(e,n){t.types||(t.types={}),n.name=e,t.types[e]=n}},{key:"getConfig",value:function(e){t.types||(t.types={});var n=null;if(e&&("string"==typeof e?n=t.types[e]:"object"===("undefined"==typeof e?"undefined":u(e))&&(n=e)),!n)throw new Error("bad_config");return n}},{key:"create",value:function(e,n){var i={string:y,number:v,"boolean":b,array:w,date:d,select:k,object:O},r=t.getConfig(e);if(!i[r.type])throw new Error("bad_type");return new i[r.type](r,n)}}]),t}(),y=function(t){function e(t,r){n(this,e);var c=i(this,Object.getPrototypeOf(e).call(this,t,r));if(o(c.config.pattern))if("string"==typeof c.config.pattern)c.config.pattern=new RegExp(c.config.pattern);else if(!(c.config.patten instanceof RegExp))throw new Error("bad_pattern");return c}return r(e,t),s(e,[{key:"check",value:function(t){if(o(t)&&"string"!=typeof t)throw new g("type",this.getPath());if(f(Object.getPrototypeOf(e.prototype),"check",this).call(this,t),o(t)){if(o(this.config.minLength)&&t.length<+this.config.minLength)throw new g("minLength",this.getPath());if(o(this.config.maxLength)&&t.length>+this.config.maxLength)throw new g("maxLength",this.getPath());if(o(this.config.pattern)&&!this.config.pattern.test(t))throw new g("pattern",this.getPath())}}}]),e}(p),v=function(t){function e(t,r){return n(this,e),i(this,Object.getPrototypeOf(e).call(this,t,r))}return r(e,t),s(e,[{key:"check",value:function(t){if(o(t)&&"number"!=typeof t)throw new g("type",this.getPath());if(f(Object.getPrototypeOf(e.prototype),"check",this).call(this,t),o(t)){if(o(this.config.min)&&!(t>=+this.config.min))throw new g("min",this.getPath());if(o(this.config.max)&&!(t<=+this.config.max))throw new g("max",this.getPath())}}}]),e}(p),b=function(t){function e(t,r){return n(this,e),i(this,Object.getPrototypeOf(e).call(this,t,r))}return r(e,t),s(e,[{key:"check",value:function(t){if(o(t)&&"boolean"!=typeof t)throw new g("type",this.getPath());f(Object.getPrototypeOf(e.prototype),"check",this).call(this,t)}}]),e}(p),w=function(t){function e(t,r){n(this,e);var o=i(this,Object.getPrototypeOf(e).call(this,t,r));return o.config.value=p.getConfig(o.config.value),o}return r(e,t),s(e,[{key:"init",value:function(t){var e=this;if(this.check(t),o(t)&&t[l]!==this){for(var n,i=0;i<t.length;i++)n=p.create(this.config.value,t[i]),n&&n.attach(t,i);t.push=function(){for(var i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];for(var c=0;c<r.length;c++)n=p.create(e.config.value,r[c]),n&&n.attach(t,t.length)},t[l]=this}}},{key:"check",value:function(t){if(o(t)&&"object"!==("undefined"==typeof t?"undefined":u(t))&&!(t instanceof Array))throw new g("type",this.getPath());if(f(Object.getPrototypeOf(e.prototype),"check",this).call(this,t),o(t)){if(o(this.config.minLength)&&t.length<+this.config.minLength)throw new g("minLength",this.getPath());if(o(this.config.maxLength)&&t.length>+this.config.maxLength)throw new g("maxLength",this.getPath())}}}]),e}(p),d=function(t){function e(t,r){return n(this,e),i(this,Object.getPrototypeOf(e).call(this,t,r))}return r(e,t),s(e,[{key:"setValue",value:function(t){var n=t;!o(n)||n instanceof Date||(n=new Date(t)),f(Object.getPrototypeOf(e.prototype),"setValue",this).call(this,t)}}]),e}(p),k=function(t){function e(t,r){n(this,e);var o=i(this,Object.getPrototypeOf(e).call(this,t,r));if(!(o.config.value instanceof Array&&o.config.value.length))throw new Error("bad_value");return o}return r(e,t),s(e,[{key:"check",value:function(t){if(f(Object.getPrototypeOf(e.prototype),"check",this).call(this,t),-1===this.config.value.indexOf(t))throw new g("value",this.getPath())}}]),e}(p),O=function(t){function e(t,r){return n(this,e),i(this,Object.getPrototypeOf(e).call(this,t,r))}return r(e,t),s(e,[{key:"init",value:function(t){if(this.check(t),o(t)&&t[l]!==this){var e,n,i=this.config.value||{};for(e in i)i[e]=p.getConfig(i[e]),n=p.create(i[e],t[e]),n&&n.attach(t,e);t[l]=this}}},{key:"check",value:function(t){if(o(t)&&"object"!==("undefined"==typeof t?"undefined":u(t)))throw new g("type",this.getPath());f(Object.getPrototypeOf(e.prototype),"check",this).call(this,t)}}]),e}(p)}]);