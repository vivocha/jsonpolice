{"version":3,"sources":["src/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["'use strict';\n\nimport { deepExtend as extend } from 'eredita';\n\nvar __sym = Symbol();\n\nfunction defined(v) {\n   return typeof v !== 'undefined';\n}\n\nclass DataError extends Error {\n  constructor(name, path) {\n    super(name);\n    this.name = 'DataError';\n    this.path = path;\n  }\n}\n\nclass InitError extends Error {\n  constructor(value, errors) {\n    super();\n    this.name = 'InitError';\n    this.value = value;\n    this.errors = errors;\n  }\n}\n\nclass Property {\n  constructor(config, value, _opts) {\n    var opts = _opts || {};\n    this.errors = opts.errors;\n    this.config = Property.getConfig(config);\n    this.loose = config.loose;\n    if (defined(opts.parent) && defined(opts.key)) {\n      this.attach(opts.parent, opts.key);\n      if (!defined(this.loose)) {\n        this.loose = (meta(this.parent) || {}).loose;\n      }\n    }\n    this.setValue(defined(value) ? value : this.config.default);\n    delete this.errors;\n  }\n  attach(parent, key) {\n    this.detach();\n    if (defined(parent) && defined(key)) {\n      this.parent = parent;\n      this.key = key;\n      Object.defineProperty(this.parent, this.key, {\n        configurable: !this.config.required,\n        enumerable: true,\n        get: this.getter(),\n        set: this.setter()\n      });\n    }\n  }\n  detach() {\n    if (defined(this.key) && defined(this.parent)) {\n      delete this.parent[this.key];\n    }\n    delete this.key;\n    delete this.parent;\n  }\n  dataError(type, sink) {\n    var e = new DataError(type, this.getPath());\n    if (sink) {\n      sink.push(e);\n    } else {\n      throw e;\n    }\n  }\n  check(v) {\n    if (!defined(v) && this.config.required) {\n      this.dataError('required');\n    }\n    if (this.config.validator && !this.config.validator(v, this)) {\n      this.dataError('validator');\n    }\n    return v;\n  }\n  init(v) {\n    return this.check(v);\n  }\n  getter() {\n    var f = this.getValue.bind(this);\n    f.config = this.config;\n    return f;\n  }\n  getValue() {\n    return this.check(this.value);\n  }\n  setter() {\n    if (this.parent && ((meta(this.parent) || {}).config || {}).readonly) {\n      return () => {\n        this.dataError('readonly');\n      }\n    } else {\n      var f = this.setValue.bind(this);\n      f.config = this.config;\n      return f;\n    }\n  }\n  setValue(v) {\n    try {\n      return this.value = this.init(v);\n    } catch(e) {\n      if (this.errors) {\n        this.errors.push(e);\n      } else {\n        throw e;\n      }\n    }\n  }\n  getPath() {\n    var p = '';\n    if (this.parent && this.key) {\n      if (this.parent[__sym]) {\n        p = this.parent[__sym].getPath();\n      }\n      p += (p ? '.' : '') + this.key;\n    }\n    return p;\n  }\n  static registerType(type, config) {\n    if (!Property.types) Property.types = {};\n    config.name = type;\n    Property.types[type] = config;\n  }\n  static getConfig(typeOrConfig) {\n    if (!Property.types) Property.types = {};\n    var config = null;\n    if (typeOrConfig) {\n      if (typeof typeOrConfig === 'string') {\n        config = Property.types[typeOrConfig];\n      } else if (typeof typeOrConfig === 'object') {\n        config = typeOrConfig;\n      }\n    }\n    if (!config) {\n      throw new Error('bad_config');\n    }\n    return config;\n  }\n  static create(typeOrConfig, value, opts) {\n    var factories = {\n      \"string\": StringProperty,\n      \"number\": NumberProperty,\n      \"boolean\": BooleanProperty,\n      \"array\": ArrayProperty,\n      \"date\": DateProperty,\n      \"select\": SelectProperty,\n      \"object\": ObjectProperty\n    };\n    var config = Property.getConfig(typeOrConfig);\n    if (!factories[config.type]) {\n      throw new Error('bad_type');\n    }\n    return new factories[config.type](config, value, opts);\n  }\n}\n\nclass StringProperty extends Property {\n  constructor(config, value, opts) {\n    super(config, value, opts);\n    if (defined(this.config.pattern)) {\n      if (typeof this.config.pattern === 'string') {\n        this.config.pattern = new RegExp(this.config.pattern);\n      } else if (!(this.config.patten instanceof RegExp)) {\n        throw new Error('bad_pattern');\n      }\n    }\n  }\n  check(v) {\n    if (defined(v) && typeof v !== 'string') {\n      if (this.loose) {\n        v = v.toString();\n      } else {\n        this.dataError('type');\n      }\n    }\n    v = super.check(v);\n    if (defined(v)) {\n      if (defined(this.config.minLength) && v.length < +this.config.minLength) {\n        this.dataError('minLength');\n      }\n      if (defined(this.config.maxLength) && v.length > +this.config.maxLength) {\n        this.dataError('maxLength');\n      }\n      if (defined(this.config.pattern) && !this.config.pattern.test(v)) {\n        this.dataError('pattern');\n      }\n    }\n    return v;\n  }\n}\n\nclass NumberProperty extends Property {\n  constructor(config, value, opts) {\n    super(config, value, opts);\n  }\n  check(v) {\n    if (defined(v) && typeof v !== 'number') {\n      if (this.loose) {\n        v = +v;\n        if (isNaN(v)) {\n          this.dataError('type');\n        }\n      } else {\n        this.dataError('type');\n      }\n    }\n    v = super.check(v);\n    if (defined(v)) {\n      if (defined(this.config.min) && !(v >= +this.config.min)) {\n        this.dataError('min');\n      }\n      if (defined(this.config.max) && !(v <= +this.config.max)) {\n        this.dataError('max');\n      }\n    }\n    return v;\n  }\n}\n\nclass BooleanProperty extends Property {\n  constructor(config, value, opts) {\n    super(config, value, opts);\n  }\n  check(v) {\n    if (defined(v) && typeof v !== 'boolean') {\n      if (this.loose) {\n        v = (v != 0 && v !== 'false');\n      } else {\n        this.dataError('type');\n      }\n    }\n    return super.check(v);\n  }\n}\n\nclass ArrayProperty extends Property {\n  constructor(config, value, opts) {\n    super(config, value, opts);\n    this.config.value = Property.getConfig(this.config.value);\n  }\n  init(v) {\n    v = this.check(v);\n    if (!defined(v) || v[__sym] === this) return;\n    v[__sym] = this;\n    for (var i = 0, p ; i < v.length ; i++) {\n      p = Property.create(this.config.value, v[i], {\n        parent: v,\n        key: i,\n        errors: this.errors\n      });\n    }\n    v.push = (...args) => {\n      for (var i = 0 ; i < args.length ; i++) {\n        p = Property.create(this.config.value, args[i], {\n          parent: v,\n          key: v.length\n        });\n      }\n    }\n    return v;\n  }\n  check(v) {\n    if (defined(v) && typeof v !== 'object' && !(v instanceof Array)) {\n      this.dataError('type');\n    }\n    v = super.check(v);\n    if (defined(v)) {\n      if (defined(this.config.minLength) && v.length < +this.config.minLength) {\n        this.dataError('minLength');\n      }\n      if (defined(this.config.maxLength) && v.length > +this.config.maxLength) {\n        this.dataError('maxLength');\n      }\n    }\n    return v;\n  }\n}\n\nclass DateProperty extends Property {\n  constructor(config, value, opts) {\n    super(config, value, opts);\n  }\n  setValue(v) {\n    var _v = v;\n    if (defined(_v) && !(_v instanceof Date)) _v = new Date(v);\n    return super.setValue(_v);\n  }\n}\n\nclass SelectProperty extends Property {\n  constructor(config, value, opts) {\n    super(config, value, opts);\n    if (!(this.config.value instanceof Array) || !this.config.value.length) {\n      throw new Error('bad_value');\n    }\n  }\n  check(v) {\n    v = super.check(v);\n    if (this.config.value.indexOf(v) === -1) {\n      this.dataError('value');\n    }\n    return v;\n  }\n}\n\nclass ObjectProperty extends Property {\n  constructor(config, value, opts) {\n    super(config, value, opts);\n    if (this.config.readonly) {\n      Object.freeze(this.value);\n    } else if (this.config.seal) {\n      Object.seal(this.value);\n    }\n  }\n  init(v) {\n    v = this.check(v);\n    if (!defined(v) || v[__sym] === this) return;\n    v[__sym] = this;\n    var k, p, sub = this.config.value || {};\n    for (k in sub) {\n      sub[k] = Property.getConfig(sub[k]);\n      p = Property.create(sub[k], v[k], {\n        parent: v,\n        key: k,\n        errors: this.errors\n      });\n    }\n    if (this.config.readonly || this.config.seal) {\n      for (k in v) {\n        if (!defined(sub[k])) {\n          delete v[k];\n        }\n      }\n    }\n    return v;\n  }\n  check(v) {\n    if (defined(v) && typeof v !== 'object') {\n      if (this.loose && typeof v === 'string') {\n        try {\n          v = JSON.parse(v);\n        } catch(e) {\n          this.dataError('parse');\n        }\n      } else {\n        this.dataError('type');\n      }\n    }\n    return super.check(v);\n  }\n}\n\nexport function create(typeOrConfig, value, opts) {\n  return Property.create(typeOrConfig, value || {}, opts).value;\n}\nexport function register(type, config, parent) {\n  return Property.registerType(type, parent ? extend(Property.getConfig(parent), config) : config);\n}\nexport function config(type) {\n  return Property.getConfig(type);\n}\nexport function meta(obj) {\n  return defined(obj) ? obj[__sym] : undefined;\n}"]}